<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics Test | Hector Norza</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
    h1, h2 { color: #333; }
    .panel { background: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
    button { background: #3b82f6; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
    button:hover { background: #2563eb; }
    .success { color: #15803d; background: #dcfce7; padding: 10px; border-radius: 4px; }
    .error { color: #b91c1c; background: #fee2e2; padding: 10px; border-radius: 4px; }
    code { background: #e5e7eb; padding: 2px 4px; border-radius: 4px; font-family: monospace; }
    ul { padding-left: 20px; }
    li { margin-bottom: 8px; }
  </style>
  
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-VPC78XB0H1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-VPC78XB0H1', {
      debug_mode: true
    });
  </script>
</head>
<body>
  <h1>Google Analytics Test Page</h1>
  <p>This page tests if Google Analytics is properly configured on your site.</p>
  
  <div class="panel">
    <h2>1. Basic Detection</h2>
    <p>Checking if Google Analytics is loaded...</p>
    <div id="detection-result"></div>
  </div>
  
  <div class="panel">
    <h2>2. Test Events</h2>
    <p>Click the buttons below to send test events to Google Analytics:</p>
    <button id="test-pageview">Send Test Pageview</button>
    <button id="test-event">Send Test Event</button>
    <div id="event-result" style="margin-top: 10px;"></div>
  </div>
  
  <div class="panel">
    <h2>3. Debugging Tips</h2>
    <ul>
      <li><strong>Check DebugView:</strong> Go to <a href="https://analytics.google.com/analytics/web/" target="_blank">Google Analytics</a> → Admin → DebugView</li>
      <li><strong>Disable Ad Blockers:</strong> Ad blockers prevent GA from loading</li>
      <li><strong>Check Implementation:</strong> Make sure your GA ID is correct (G-VPC78XB0H1)</li>
      <li><strong>Verify Domain:</strong> Ensure your domain is correctly set up in GA</li>
      <li><strong>Allow Time:</strong> Data can take up to 24-48 hours to appear in standard reports</li>
    </ul>
  </div>
  
  <p><a href="/">← Return to Homepage</a></p>
  
  <script>
    // 1. Detection check
    setTimeout(function() {
      const detectionResult = document.getElementById('detection-result');
      if (typeof gtag === 'function') {
        detectionResult.innerHTML = '✅ Google Analytics is properly loaded!';
        detectionResult.className = 'success';
      } else {
        detectionResult.innerHTML = '❌ Google Analytics is NOT loaded. Check your implementation or disable ad blockers.';
        detectionResult.className = 'error';
      }
    }, 1000);
    
    // 2. Test events
    document.getElementById('test-pageview').addEventListener('click', function() {
      const eventResult = document.getElementById('event-result');
      
      if (typeof gtag === 'function') {
        gtag('event', 'page_view', {
          page_title: 'Test Page',
          page_location: window.location.href
        });
        
        eventResult.innerHTML = '✅ Test pageview sent! Check DebugView in GA.';
        eventResult.className = 'success';
      } else {
        eventResult.innerHTML = '❌ Could not send test pageview. GA not detected.';
        eventResult.className = 'error';
      }
    });
    
    document.getElementById('test-event').addEventListener('click', function() {
      const eventResult = document.getElementById('event-result');
      
      if (typeof gtag === 'function') {
        gtag('event', 'test_event', {
          event_category: 'test',
          event_label: 'analytics_test_button',
          value: Date.now()
        });
        
        eventResult.innerHTML = '✅ Test event sent! Check DebugView in GA.';
        eventResult.className = 'success';
      } else {
        eventResult.innerHTML = '❌ Could not send test event. GA not detected.';
        eventResult.className = 'error';
      }
    });
  </script>
</body>
</html>